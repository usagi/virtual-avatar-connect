<!--
 ï¼‘ã¤ã®å‡ºåŠ›ã‚’é…ä¿¡ç”»é¢ã¨åŒã˜ç¸¦æ¨ªæ¯”ã§ä½œã£ã¦ã€å„è¦ç´ ã®ä½ç½®èª¿æ•´ãªã©ã¯ã“ã¡ã‚‰å´ã§è¡Œã†å ´åˆã¯ã€
 ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½œã‚Šè¾¼ã‚“ã§ OBS Studio ãªã©ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚½ãƒ¼ã‚¹ã§ã¯é…ä¿¡ç”»é¢ã¨ã´ã£ãŸã‚ŠåŒã˜ã«ãªã‚‹ã‚ˆã†ã«
 ã‚µã‚¤ã‚ºã¨ä½ç½®ã‚’èª¿æ•´ã™ã‚‹ã®ã‚‚ã‚¢ãƒªã§ã™ã€‚ç”»é¢å…¨ä½“ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãªã©ã‚‚ä¸€ç·’ã«ä½œã‚Šè¾¼ã¿ãŸã„å ´åˆã«ã¯ä¾¿åˆ©ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

 åˆ¥ã®æ–¹æ³•ã¨ã—ã¦ã¯ã€è¦ç´ ã”ã¨ã«å€‹åˆ¥ã®å‡ºåŠ›ç”»é¢ã‚’ä½œã‚Šã€ãã‚Œãžã‚Œã®å‡ºåŠ›ç”»é¢ã‚’ OBS Studio ãªã©ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã‚½ãƒ¼ã‚¹ã§
 å€‹åˆ¥ã«é…ç½®ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚ã“ã®å ´åˆã¯ã€å„è¦ç´ ã®ä½ç½®èª¿æ•´ãªã©ã¯ OBS Studio ãªã©ã§èª¿æ•´ã—ã¦ä½œã‚Šè¾¼ã¿ã¾ã™ã€‚
 ç”»é¢ã®ä¸€éƒ¨ã«å‡ºã‚Œã°ã‚ˆã„è¦ç´ ã‚„ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä½œã‚Šè¾¼ã¿ã¯ã€ã“ã®æ–¹æ³•ã®æ–¹ãŒä¾¿åˆ©ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

 ã‚‚ã¡ã‚ã‚“ã€ä¸¡æ–¹ã®æ–¹æ³•ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã®ã‚‚ã‚ˆã„ã§ã™ã—ã€é…ä¿¡ç”»é¢ã¨åŒã˜ã‚µã‚¤ã‚ºã§è¤‡æ•°ã®å‡ºåŠ›ç”»é¢ã‚’ä½œã‚Šè¾¼ã‚“ã§ã€
 å¤šé‡ãƒ¬ã‚¤ãƒ¤ãƒ¼ãªå…¨ç”»é¢åŠ¹æžœã‚’å®Ÿç¾ã—ãŸã‚Šã€LOADINGç”»é¢ã‚„BRBç”»é¢ãªã©ã®ã‚¹ã‚¤ãƒƒãƒãƒ³ã‚°ã‚‚ã“ã¡ã‚‰ã§ä½œã‚Šè¾¼ã‚€ã®ã‚‚
 ãŸã¶ã‚“ã‚¢ãƒªã§ã™ã€‚

 index.html ã¯ /output ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚ä»–ã«è¿½åŠ ã®å‡ºåŠ›ç”»é¢ã‚’ç”¨æ„ã—ãŸã„å ´åˆã¯ã€ä»»æ„ã®åå‰ã§
 ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä¾‹ãˆã° chat.html ãªã‚‰ /output/chat ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã ã‘ã§
 VACã¯å†èµ·å‹•ãªã©ã—ãªãã¦ã‚‚è‡ªå‹•çš„ã«èªè­˜ã—ã¾ã™ã€‚æ¥½ã—ã„ç”»é¢ä½œã‚ŠãŒã§ãã‚‹ã¨ã„ã„ã§ã™ã­ðŸ’ž

 ä»¥ä¸‹ã®ä¾‹ã§ã¯ã“ã® /output ã¯é…ä¿¡ç”»é¢å…¨ä½“ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã™ã‚‹ã‚ˆã†ã«ä½œæˆã—ã€
 VAC ã‹ã‚‰ title ã¨ description ã®2ã¤ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å—ä¿¡ã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

 ã¾ãŸã€ scene ãƒãƒ£ãƒ³ãƒãƒ«ã¯å—ä¿¡ã—ãŸå†…å®¹ãŒç›´æŽ¥ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€
 ç°¡å˜ãª CSS ã«ã‚ˆã‚‹é…ä¿¡ç”»é¢ã®å ´é¢åˆ‡ã‚Šæ›¿ãˆã‚’è¡Œãˆã‚‹ã‚³ãƒžãƒ³ãƒ‰ãƒãƒ£ãƒ³ãƒãƒ«çš„ãªä½¿ã„æ–¹ã‚’ã—ã¦ã„ã¾ã™ã€‚
 scene ãƒãƒ£ãƒ³ãƒãƒ«ã«æ¬¡ã®å†…å®¹ã‚’é€ã‚Šã¤ã‘ã‚‹ã¨ãã‚Œãžã‚Œã‚·ãƒ¼ãƒ³ãƒã‚§ãƒ³ã‚¸ãŒå‹•ä½œã—ã¾ã™ã€‚
  /loading ... é–‹å§‹å‰ãªã©ã®ã„ã‚ã‚†ã‚‹ã€Œãƒ­ãƒ¼ãƒ‰ä¸­ã€ã‚·ãƒ¼ãƒ³ã¸ç§»ã‚Šã¾ã™ã€‚
  /play    ... é€šå¸¸ã®é…ä¿¡ä¸­ã®ã‚·ãƒ¼ãƒ³ã¸ç§»ã‚Šã¾ã™ã€‚
  /brb     ... "be right back" ã‚·ãƒ¼ãƒ³ã¸ä»¥é™ã—ã¾ã™ã€‚(OBSç­‰ã®åˆ¶å¾¡ã§ã¯ãªãCSSã§ã“ã®ãƒšãƒ¼ã‚¸ã ã‘ã§åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚)
 -->

<!DOCTYPE html>
<meta charset="utf-8">
<title>VAC/output</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,500;1,900&family=Kiwi+Maru:wght@500&display=swap"
 rel="stylesheet">
<link rel="stylesheet" href="/resources/css/output.css">

<script
 src="https://cdnjs.cloudflare.com/ajax/libs/reconnecting-websocket/1.0.0/reconnecting-websocket.min.js"></script>
<script type="module" src="/resources/js/output.js"></script>
<script type="module" src="/resources/js/scene.js"></script>
<script type="module" src="/resources/js/brb.js"></script>
<script>
 const DEFAULT_TITLE = 'æ–°åž‹é…ä¿¡æ”¯æ´ã‚¢ãƒ—ãƒª Virtual Avatar Connect; VAC å‹•ä½œè©¦é¨“ä¸­'
 const DEFAULT_DESCRIPTION = 'â€• AIç–‘ä¼¼äººæ ¼å…±æ¼”è€…ã€VRMåˆ¶å¾¡ã€éŸ³å£°èªè­˜ã€ç”»åƒèªè­˜ã€å­—å¹•ã€ç¿»è¨³ã€èª­ã¿ä¸Šã’ãªã©ãªã©ã€è¿‘æ—¥ãƒªãƒªãƒ¼ã‚¹äºˆå®šã§ã™ðŸ‘€ â€•'
 document.addEventListener('DOMContentLoaded', () =>
 {
  vac.output.run()
  vac.scene.start()
  window.title_elements = [...document.querySelectorAll('[data-vac-output="title"]')]
  window.description_elements = [...document.querySelectorAll('[data-vac-output="description"]')]
  // ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ŽãŒç©ºã«ãªã‚‹ã“ã¨ãŒã‚ã‚Œã°ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å…¥ã‚Œã¦å¯‚ã—ããªã‚‰ãªã„ã‚ˆã†ã«ã—ã¦ãŠã
  setInterval(() =>
  {
   if (title_elements[0].innerText === '')
    for (let e of title_elements)
     e.innerText = DEFAULT_TITLE
   if (description_elements[0].innerText === '')
    for (let e of description_elements)
     e.innerText = DEFAULT_DESCRIPTION
  }, 200)
  // ç”»é¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨BRBã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã™ã‚‹ãŠã¾ã‘æ©Ÿèƒ½ã€‚OBSã§ã‚‚ã€Œå¯¾è©±(æ“ä½œ)ã€ã§ä½¿ãˆã¾ã™ã€‚
  document.body.onclick = () => vac.scene.overlap('brb')
 });
</script>

<div data-vac-scene-stage></div>

<div data-vac-scene-wing>

 <section data-vac-scene="play" class="play">

  <h1 class="title moco-moji">
   <span data-vac-output="title"></span>
   <span data-vac-output="title"></span>
  </h1>

  <h2 class="description moco-moji">
   <span data-vac-output="description"></span>
   <span data-vac-output="description"></span>
  </h2>

 </section>

 <section data-vac-scene="loading" class="loading background-mask">
  <div class="background"></div>
  <p>Loading</p>

 </section>

 <section data-vac-scene="brb" class="brb background-mask">
  <div class="background"></div>
  <div class="tape-outline main">
   <div class="tape">
    <div class=" danger-zone">
     <p>B.R.B.</p>
     <p data-vac-output="brb"></p>
    </div>
   </div>
  </div>
 </section>

</div>